<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Numbered Radio Options</title>
  <link rel="stylesheet" href="./global.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>

<body>
  <div class="container">
    <h1>Test Numbered Radio Options</h1>

    <form id="testForm">
      <!-- Test Saddle Build -->
      <div class="form-group">
        <label>Saddle Build</label>
        <div class="checkbox-grid">
          <div class="checkbox-item">
            <input type="radio" id="saddleBuild1" name="saddleBuild" value="Full Leather">
            <label for="saddleBuild1">Full Leather</label>
          </div>
          <div class="checkbox-item">
            <input type="radio" id="saddleBuild2" name="saddleBuild" value="Hybrid" checked>
            <label for="saddleBuild2">Hybrid</label>
          </div>
          <div class="checkbox-item">
            <input type="radio" id="saddleBuild3" name="saddleBuild" value="Full Neoprene">
            <label for="saddleBuild3">Full Neoprene</label>
          </div>
        </div>
      </div>

      <!-- Test Skirt Style -->
      <div class="form-group">
        <label>Skirt Style</label>
        <div class="checkbox-grid">
          <div class="checkbox-item">
            <input type="radio" id="skirtStyle1" name="skirtStyle" value="Square">
            <label for="skirtStyle1">Square</label>
          </div>
          <div class="checkbox-item">
            <input type="radio" id="skirtStyle2" name="skirtStyle" value="45°">
            <label for="skirtStyle2">45°</label>
          </div>
          <div class="checkbox-item">
            <input type="radio" id="skirtStyle3" name="skirtStyle" value="Square Round" checked>
            <label for="skirtStyle3">Square Round</label>
          </div>
          <div class="checkbox-item">
            <input type="radio" id="skirtStyle4" name="skirtStyle" value="Rounded">
            <label for="skirtStyle4">Rounded</label>
          </div>
          <div class="checkbox-item">
            <input type="radio" id="skirtStyle5" name="skirtStyle" value="Relief">
            <label for="skirtStyle5">Relief</label>
          </div>
        </div>
      </div>

      <!-- Test Conchos (should show numbers) -->
      <div class="form-group">
        <label>Conchos</label>
        <div class="checkbox-grid">
          <div class="checkbox-item">
            <input type="radio" id="concho1" name="conchos" value="1">
            <label for="concho1">Concho 1</label>
          </div>
          <div class="checkbox-item">
            <input type="radio" id="concho2" name="conchos" value="2">
            <label for="concho2">Concho 2</label>
          </div>
          <div class="checkbox-item">
            <input type="radio" id="concho3" name="conchos" value="3" checked>
            <label for="concho3">Concho 3</label>
          </div>
        </div>
      </div>

      <button type="button" id="testValues">Test Numbered Values</button>
    </form>

    <div id="results" style="margin-top: 20px; padding: 20px; background: #f0f0f0; border-radius: 5px;"></div>
  </div>

  <script>
    // Simulate the methods from PDFGenerator
    function getCheckedRadioValue(fieldName) {
      const $field = $('#testForm').find(`[name="${fieldName}"]:checked`);
      return $field.length ? $field.val() : '';
    }

    function getOptionTranslation(fieldName, optionValue) {
      // Simulate translation - in real app this would use TranslationManager
      const translations = {
        'saddleBuild': {
          'Full Leather': 'Couro Completo',
          'Hybrid': 'Híbrido',
          'Full Neoprene': 'Neoprene Completo'
        },
        'skirtStyle': {
          'Square': 'Quadrado',
          '45°': '45 Graus',
          'Square Round': 'Quadrado Arredondado',
          'Rounded': 'Arredondado',
          'Relief': 'Relevo'
        },
        'conchos': {
          '1': 'Concho 1',
          '2': 'Concho 2',
          '3': 'Concho 3'
        }
      };
      return translations[fieldName] && translations[fieldName][optionValue]
        ? translations[fieldName][optionValue]
        : optionValue;
    }

    function getNumberedRadioValue(fieldName) {
      const $field = $('#testForm').find(`[name="${fieldName}"]:checked`);
      if ($field.length) {
        const allFields = $('#testForm').find(`[name="${fieldName}"]`);
        const checkedIndex = allFields.index($field) + 1; // Start from 1
        const formattedIndex = checkedIndex.toString().padStart(2, '0'); // Format as 01, 02, etc.
        const originalValue = $field.val();
        const translatedValue = getOptionTranslation(fieldName, originalValue);
        return `${formattedIndex} - ${translatedValue}`;
      }
      return '';
    }

    function getCheckedValue(fieldName) {
      const $field = $('#testForm').find(`[name="${fieldName}"]:checked`);
      if ($field.length) {
        const allFields = $('#testForm').find(`[name="${fieldName}"]`);
        const checkedIndex = allFields.index($field) + 1; // Start from 1
        const formattedIndex = checkedIndex.toString().padStart(2, '0'); // Format as 01, 02, etc.
        const originalValue = $field.val();
        const translatedValue = getOptionTranslation(fieldName, originalValue);
        return `${formattedIndex} - ${translatedValue}`;
      }
      return '';
    }

    $('#testValues').on('click', function () {
      const results = {
        'saddleBuild (getNumberedRadioValue)': getNumberedRadioValue('saddleBuild'),
        'skirtStyle (getNumberedRadioValue)': getNumberedRadioValue('skirtStyle'),
        'conchos (getCheckedValue)': getCheckedValue('conchos')
      };

      let html = '<h3>Test Results for Numbered Radio Options:</h3>';

      for (const [key, value] of Object.entries(results)) {
        const hasNumber = value.match(/^\d{2} - /);
        const color = hasNumber ? 'green' : 'red';
        html += `<p style="color: ${color}"><strong>${key}:</strong> "${value}"</p>`;
      }

      html += '<br><p><strong>Expected Format:</strong> "01 - Option Name", "02 - Option Name", etc.</p>';
      html += '<p><strong>Note:</strong> The number represents the position of the selected option in the list (01, 02, 03...).</p>';

      $('#results').html(html);
    });
  </script>
</body>

</html>